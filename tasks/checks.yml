---
# Simulate network device running config collection
- name: Print dates
  ansible.builtin.debug:
    msg:
      - "date : {{ ansible_date_time['date'] }}"
      - "time : {{ ansible_date_time['time'] }}"

- name: Debug distribution and version
  ansible.builtin.debug:
    msg:
      - "distribution : {{ ansible_distribution }}"
      - "distribution_major_version : {{ ansible_distribution_major_version }}"
      
- name: Collect some information
  ansible.builtin.shell: "date && hostname"
  register: config_output
  delegate_to: localhost
  when: _date_ == true

- name: Save the data to a temporary config store
  ansible.builtin.copy:
    content: "{{ config_output['stdout'] }}"
    dest: "{{ _tmp_file_ }}"
    force: yes  # The copy module defaults to not overwriting when the content hasnâ€™t changed, but force: yes guarantees overwrite.
  delegate_to: localhost
